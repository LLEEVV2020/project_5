<!DOCTYPE html>
<html lang="ru" class="page">

  <head>
    @include('partials/head.html')

    <style>
      .imgelem_code{
        max-width: 193px;
        max-height: 189px;
      }
    </style>
  </head>

<body class="page__body">
  <div class="site-container">


    @include('partials/header.html')

    <main class="main">


    </main>

    @include('partials/footer.html')
    @include('partials/foot.html')

    <script>

function getElement(url, selector, c) {
    request(new XMLHttpRequest());

    function request(xhr) {
        xhr.open('GET', '' + url, true);
        xhr.send();
        xhr.onreadystatechange = function() {
            if(xhr.readyState == 4) {
                if(xhr.status == 200) {
                    html = document.createElement('div');
                    html.innerHTML = xhr.responseText;
                    //c(html.querySelector(selector));

                    let text =  xhr.responseText;
                    c(text);


                }
            }
        }
    }
  }

  function VizovStart(){


    // https://base.x5quest.ru/api/QRGeneration?sringQR=
    //debugger;

   // getElement('https://base.x5quest.ru/api/QRGeneration?sringQR=QK21QQK21QK2gh15ghhjh95gK215ghhjh95ghhjh9', 'body', function(element) {

    let promocode_5paket = localStorage.getItem('promocode_5paket');


    let link_parse = "https://base.x5quest.ru/api/RedirectToPage?promo=";

    let jsob_parse = JSON.parse(promocode_5paket);

    var abc = "abcdefghijklmnopqrstuvwxyz";
        var rs = "";
        while (rs.length < 12) {
            rs += abc[Math.floor(Math.random() * abc.length)];
        }
        //console.log(rs);
/*

https://base.x5quest.ru/api/RedirectToPage?promo=QK21509&str=asdfassfasdasdasdasfqxcaasdasfasfds

https://base.x5quest.ru/api/QRGeneration?sringQR=https://base.x5quest.ru/api/RedirectToPage?promo=QK21509&str=asdfassfasdasdasdasfqxcaasdasfasfds

*/
   // let str_item = 'https://base.x5quest.ru/api/QRGeneration?sringQR=' + link_parse + jsob_parse + '&str=' + rs ;
 //let str_item = 'https://base.x5quest.ru/api/QRGeneration?sringQR=' + link_parse + jsob_parse + '&str=' + rs ;
 let str_item = 'https://base.x5quest.ru/api/QRGeneration?str=1525&sringQR=' + link_parse + jsob_parse + '&str=' + rs ;

    getElement(str_item, 'body', function(element) {
      //console.log(element);
     // let zapisatsa  = document.querySelector('.seats-10-00');
     // zapisatsa.dataset.value = element.innerHTML;

      // imgelem_code
      let imgelem_code = document.querySelector('.imgelem_code');

      element =  JSON.parse(element);
      element =  "data:image/jpg;base64," + element;

      //let baseStr64="iVBORw0KGgoAAAANSUhEUgAAAFUAAABVCAYAAAA49ahaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARnSURBVHhe7ZCBaiw5DATv/386pwwT8JYbtYVG2RfYgorB3ZIn+1/w9Zs6XJ85Jaoz6f2mDqd0uD5zSlRn0vtNHU7pcH3mlKjOpPebOpzS4frMKVGdSe8398sneXo/91Hi8i5qf5z75ZM8vZ/7KHF5F7U/zv3ySZ7ez32UuLyL2h/nfvkkT+/nPkpc3kXtj3O/XGHuJH8tdxKVx7lfrjB3kr+WO4nK49wvV5g7yV/LnUTlce6XK8yd5K/lTqLyOPfLFeZO0s0J+5RUcydReZz75QpzJ+nmhH1KqrmTqDzO/XKFuZN0c8I+JdXcSVQe5365wtxJujlhn5Jq7iQqj3O/XGHuJNXcSZ7OnUTlce6XK8ydpJo7ydO5k6g8zv1yhbmTVHMneTp3EpXHuV+uMHeSau4kT+dOovI498sncftdTqb7VdT+OPfLJ3H7XU6m+1XU/jj3yydx+11OpvtV1P4498sncftdTqb7VdT+OF8vpyW/nU97v6nDKclv59Peb+pwSvLb+bT3mzqckvx2Pu315vX3jaiPWnH5v8jnRx3g86MO8PlRB4jvzD+aeVeHmsl0qJmOJ0QvH2Le1aFmMh1qpuMJ0cuHmHd1qJlMh5rpeEL08iHmXR1qJtOhZjqecNZaUA9lkmo+rUPNZF4z198CalEmqebTOtRM5jVz/S2gFmWSaj6tQ81kXjPX3wJqUSap5tM61EzmNXP9TVCDq0R1VonqrDpcnzkl3fwb+9VcQonqrBLVWXW4PnNKuvk39qu5hBLVWSWqs+pwfeaUdPNv7FdzCSWqs0pUZ9Xh+swp6ebfxP1riU5TfY/9rkR1MhVxr8s/TlN9j/2uRHUyFXGvyz9OU32P/a5EdTIVca/LP05TfY/9rkR1MhX2vzhZkuHmp/N3YL+i+9Fufjp/B/Yruh/t5qfzd2C/ovvRbn46fwdv/wr+KE7icsJ+VaLyz49alKj886MWJSr//KhFicrjfL2ctorasUpcXoX7qCLudXnKKmrHKnF5Fe6jirjX5SmrqB2rxOVVuI8q4l6Xp6yidqwSl1fhPqqIe1/q4PZ38y7c3/XeuV8+idvfzbtwf9d75375JG5/N+/C/V3vnfvlk7j93bwL93e9d+6XK8ydpJpTMp07TubjPi8xd5JqTsl07jiZj/u8xNxJqjkl07njZD7u8xJzJ6nmlEznjpP5uM9LzJ2kmxP2qxLVyTwhevkQcyfp5oT9qkR1Mk+IXj7E3Em6OWG/KlGdzBOilw8xd5JuTtivSlQn84To5UPMnaSaU4fru3yCeCd/lLmTVHPqcH2XTxDv5I8yd5JqTh2u7/IJ4p38UeZOUs2pw/VdPkG8M/todz/nuzrUzOoJ0asPVeju53xXh5pZPSF69aEK3f2c7+pQM6snRK8+VKG7n/NdHWpm9YTo6eEpiepkEpeTap+czMf9a2laojqZxOWk2icn83H/WpqWqE4mcTmp9snJfNy/lqYlqpNJXE6qfXIyX9/6wfD19T9MPuHoJo3kEAAAAABJRU5ErkJggg==";
      imgelem_code.setAttribute('src', element);



    });

    /*getElement('https://pro-dex.ru/1.php', '.question-hyperlink2', function(element) {
        //console.log(element.innerHTML);
        let zapisatsa  = document.querySelector('.seats-11-15');
        zapisatsa.dataset.value = element.innerHTML;
    });

    getElement('https://pro-dex.ru/1.php', '.question-hyperlink3', function(element) {
      console.log(element);
    });*/

  }

    VizovStart();

    $(document).ready(function() {


      localStorage.removeItem('x5paket-katok-qw-screen-surprise');
      localStorage.setItem('x5paket-katok-qw-screen-surprise', "x5paket-katok-qw-screen-surprise");


      $(".findout .btn").click(function(){

        localStorage.removeItem('x5paket-katok-qw-run');
      localStorage.setItem('x5paket-katok-qw-run', "x5paket-katok-qw-run");

      });

      $(".add-card .btn").click(function(){
        localStorage.removeItem('x5paket-katok-qw-magic');
      localStorage.setItem('x5paket-katok-qw-magic', "x5paket-katok-qw-magic");

      });

    });


    </script>

    <!-- @include('html/h1.html') пример include -->
  </div>
</body>

</html>
